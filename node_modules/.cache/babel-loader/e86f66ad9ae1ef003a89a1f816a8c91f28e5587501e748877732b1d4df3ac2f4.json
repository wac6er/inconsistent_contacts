{"ast":null,"code":"import React,{useState}from'react';import{auth}from'./firebase';import{signInWithEmailAndPassword,createUserWithEmailAndPassword,sendEmailVerification}from'firebase/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignIn(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[isNewUser,setIsNewUser]=useState(true);const[error,setError]=useState('');const[showPassword,setShowPassword]=useState(false);const handleSignIn=async event=>{event.preventDefault();// Prevents the default form submission behavior\ntry{if(isNewUser){console.log(\"Attempting to register:\",email);const userCredential=await createUserWithEmailAndPassword(auth,email,password);console.log(\"Registration successful\",userCredential);sendEmailVerification(userCredential.user);setError('');alert('Registration successful. Please check your email for verification.');setIsNewUser(false);// Switch back to sign-in after successful registration\n}else{console.log(\"Attempting to sign in:\",email);await signInWithEmailAndPassword(auth,email,password);setError('');}}catch(error){console.error(\"Authentication error\",error);if(isNewUser){setError('Registration failed. Email must be valid. Password must be 6 characters long.');}else{setError('Failed to sign in. Please check your email and password.');}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:isNewUser?'Sign Up':'Sign In'}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignIn,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',id:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowPassword(!showPassword),children:[showPassword?'Hide':'Show',\" Password\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isNewUser?'Register':'Sign In'})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsNewUser(!isNewUser),children:isNewUser?'Already have an account? Sign In':'New user? Register'})}),isNewUser&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'10px'},children:\"A verification email will be sent upon registration.\"})]})]});}export default SignIn;","map":{"version":3,"names":["React","useState","auth","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendEmailVerification","jsx","_jsx","jsxs","_jsxs","SignIn","email","setEmail","password","setPassword","isNewUser","setIsNewUser","error","setError","showPassword","setShowPassword","handleSignIn","event","preventDefault","console","log","userCredential","user","alert","children","style","color","onSubmit","htmlFor","type","id","value","onChange","e","target","onClick","marginTop"],"sources":["C:/Users/w7car/source/repos/inconsistentContacts/inconsistentContacts/src/SignIn.js"],"sourcesContent":["\r\n    import React, { useState } from 'react';\r\n    import { auth } from './firebase';\r\n    import { signInWithEmailAndPassword, createUserWithEmailAndPassword, sendEmailVerification } from 'firebase/auth';\r\n\r\n    function SignIn() {\r\n        const [email, setEmail] = useState('');\r\n        const [password, setPassword] = useState('');\r\n        const [isNewUser, setIsNewUser] = useState(true);\r\n        const [error, setError] = useState('');\r\n        const [showPassword, setShowPassword] = useState(false);\r\n\r\n        const handleSignIn = async (event) => {\r\n            event.preventDefault(); // Prevents the default form submission behavior\r\n            try {\r\n                if (isNewUser) {\r\n                    console.log(\"Attempting to register:\", email);\r\n                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n                    console.log(\"Registration successful\", userCredential);\r\n\r\n                    sendEmailVerification(userCredential.user);\r\n                    setError('');\r\n                    alert('Registration successful. Please check your email for verification.');\r\n                    setIsNewUser(false); // Switch back to sign-in after successful registration\r\n                } else {\r\n                    console.log(\"Attempting to sign in:\", email);\r\n                    await signInWithEmailAndPassword(auth, email, password);\r\n                    setError('');\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error(\"Authentication error\", error);\r\n                if (isNewUser) {\r\n                    setError('Registration failed. Email must be valid. Password must be 6 characters long.');\r\n                } else {\r\n                    setError('Failed to sign in. Please check your email and password.');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        return (\r\n            <div>\r\n                <h2>{isNewUser ? 'Sign Up' : 'Sign In'}</h2>\r\n                {error && <p style={{ color: 'red' }}>{error}</p>}\r\n                <form onSubmit={handleSignIn}>\r\n                    <div>\r\n                        <label htmlFor=\"email\">Email:</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            value={email}\r\n                            onChange={e => setEmail(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"password\">Password:</label>\r\n                        <input\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            id=\"password\"\r\n                            value={password}\r\n                            onChange={e => setPassword(e.target.value)}\r\n                        />\r\n                        <button type=\"button\" onClick={() => setShowPassword(!showPassword)}>\r\n                            {showPassword ? 'Hide' : 'Show'} Password\r\n                        </button>\r\n                    </div>\r\n                    <div style={{ marginTop: '10px' }}>\r\n                        <button type=\"submit\">{isNewUser ? 'Register' : 'Sign In'}</button>\r\n                    </div>\r\n                    <div style={{ marginTop: '10px' }}>\r\n                        <button type=\"button\" onClick={() => setIsNewUser(!isNewUser)}>\r\n                            {isNewUser ? 'Already have an account? Sign In' : 'New user? Register'}\r\n                        </button>\r\n                    </div>\r\n                    {isNewUser && <p style={{ marginTop: '10px' }}>A verification email will be sent upon registration.</p>}\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    export default SignIn;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}