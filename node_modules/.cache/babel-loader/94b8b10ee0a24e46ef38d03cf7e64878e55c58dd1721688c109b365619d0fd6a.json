{"ast":null,"code":"import React,{useState}from'react';import{auth}from'./firebase';import{signInWithEmailAndPassword,createUserWithEmailAndPassword,sendEmailVerification}from'firebase/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignIn(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[isNewUser,setIsNewUser]=useState(false);const[error,setError]=useState('');const handleSignIn=async()=>{try{if(isNewUser){console.log(\"Attempting to register:\",email);const userCredential=await createUserWithEmailAndPassword(auth,email,password);console.log(\"Registration successful\",userCredential);// Send email verification\nsendEmailVerification(userCredential.user);setError('');alert('Registration successful. Please check your email for verification.');setIsNewUser(false);// Switch back to sign-in after successful registration\n}else{console.log(\"Attempting to sign in:\",email);await signInWithEmailAndPassword(auth,email,password);setError('');}}catch(error){console.error(\"Authentication error\",error);if(isNewUser){setError('Registration failed. Please check your email and password.');}else{setError('Failed to sign in. Please check your email and password.');}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:isNewUser?'Sign Up':'Sign In'}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignIn,children:isNewUser?'Register':'Sign In'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsNewUser(!isNewUser),children:isNewUser?'Already have an account? Sign In':'New user? Register'})]});}export default SignIn;","map":{"version":3,"names":["React","useState","auth","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendEmailVerification","jsx","_jsx","jsxs","_jsxs","SignIn","email","setEmail","password","setPassword","isNewUser","setIsNewUser","error","setError","handleSignIn","console","log","userCredential","user","alert","children","style","color","htmlFor","type","id","value","onChange","e","target","onClick"],"sources":["C:/Users/w7car/source/repos/inconsistentContacts/inconsistentContacts/src/SignIn.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { auth } from './firebase';\r\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword, sendEmailVerification } from 'firebase/auth';\r\n\r\nfunction SignIn() {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [isNewUser, setIsNewUser] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleSignIn = async () => {\r\n        try {\r\n            if (isNewUser) {\r\n                console.log(\"Attempting to register:\", email);\r\n                const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n                console.log(\"Registration successful\", userCredential);\r\n\r\n                // Send email verification\r\n                sendEmailVerification(userCredential.user);\r\n                setError('');\r\n                alert('Registration successful. Please check your email for verification.');\r\n                setIsNewUser(false); // Switch back to sign-in after successful registration\r\n            } else {\r\n                console.log(\"Attempting to sign in:\", email);\r\n                await signInWithEmailAndPassword(auth, email, password);\r\n                setError('');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Authentication error\", error);\r\n            if (isNewUser) {\r\n                setError('Registration failed. Please check your email and password.');\r\n            } else {\r\n                setError('Failed to sign in. Please check your email and password.');\r\n            }\r\n        }\r\n    };\r\n    return (\r\n        <div>\r\n            <h2>{isNewUser ? 'Sign Up' : 'Sign In'}</h2>\r\n            {error && <p style={{ color: 'red' }}>{error}</p>}\r\n            <div>\r\n                <label htmlFor=\"email\">Email:</label>\r\n                <input\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    value={email}\r\n                    onChange={e => setEmail(e.target.value)}\r\n                />\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"password\">Password:</label>\r\n                <input\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    value={password}\r\n                    onChange={e => setPassword(e.target.value)}\r\n                />\r\n            </div>\r\n            <button onClick={handleSignIn}>{isNewUser ? 'Register' : 'Sign In'}</button>\r\n            <button onClick={() => setIsNewUser(!isNewUser)}>\r\n                {isNewUser ? 'Already have an account? Sign In' : 'New user? Register'}\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SignIn;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}